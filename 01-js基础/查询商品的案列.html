<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <div class="search">
            按照价格查询:<input type="text" class="start">-
            <input type="text" class="end">

            <button class="search-price">搜索</button>

            按照商品名称查询:<input type="text"
            class="product"
            >
            <button class="search-pro">查询</button>

        </div>

        <table>
            <thead>
                <tr>
                    <th>id</th>
                    <th>产品名称</th>
                    <th>价格</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>小米</td>
                    <td>3999</td>
                </tr>
                
            </tbody>
        </table>
    </body>
    <script>
        //利用新数组方法操作数据
        var data=[{
            id:1,
            pname:'小米',
            price:3999
        },
        {
            id:1,
            pname:'小米',
            price:3999
        },{
            id:2,
            pname:'oppo',
            price:666
        },{
            id:3,
            pname:'荣耀',
            price:1299
        },{
            id:4,
            pname:'苹果',
            price:6000
        }
    ]
      //1,获取响应的数据渲染到页面中去
      number(data);
     
      //做一个封装函数
     function number(mydate){
       
        
        var tbody=document.querySelector('tbody')
          //清空原来的数据
       tbody.innerHTML=''//********
     mydate.forEach(function(value,index,array){
        var tr=document.createElement('tr') 
           tbody.appendChild(tr)
        for(var j in data[index]){
            var td=document.createElement('td')
            td.innerHTML=data[index][j]
            tr.appendChild(td)
        }
       

          
     })
     
     }
    
        
    //2:搜索0-1000以内的数字用filter
    var start=document.querySelector('.start');
    var end=document.querySelector('.end')
    var button=document.querySelector(".search-price")
    
    
   button.addEventListener('click',function(){
      start.innerHTML=start.value
      end.innerHTML=end.value
    var newdata=data.filter(function(value,index,arrat){
        //判断array中是否大于0并且小于1000
       // console.log(value.price)
    return value.price>start.value&&value.price<=end.value
       
          
     
            
      })
     //把筛选之后的对象渲染到页面中
      number(newdata);
   })
    //4根据商品名称查找商品
    //如果查询数组中唯一的元素,用some方法更合适,因为它找到一个元素就不再返回
  
     var search=document.querySelector('.search-pro')
     var product=document.querySelector('.product')
     search.addEventListener('click',function(){
         var run=[]
       data.some(function(value,index,array){
        if(product.value==value.pname){
            run.push(value)
             return true//返回一个布尔值
             
        }
   
    })
    number(run)
     })
    
   

    </script>
</html>